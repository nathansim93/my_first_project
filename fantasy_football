
import requests          
import pandas as pd       

def get_nfl_data():
    # website to get NFL scores:
    url = "https://site.api.espn.com/apis/site/v2/sports/football/nfl/scoreboard"

    response = requests.get(url)

    data = response.json()

    # From that big blob of data, we only care about the 'events' part
    games = data['events']

    # store results
    rows = []

    # Loop through each game in the list
    for g in games:
        row = {
            'home_team': g['competitions'][0]['competitors'][0]['team']['displayName'],
            'away_team': g['competitions'][0]['competitors'][1]['team']['displayName'],
            'home_score': g['competitions'][0]['competitors'][0]['score'],
            'away_score': g['competitions'][0]['competitors'][1]['score']
        }
        rows.append(row)

    df = pd.DataFrame(rows)

    df.to_csv('data/nfl_scores.csv', index=False)

    print(df.head())
